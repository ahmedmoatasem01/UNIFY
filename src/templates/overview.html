{% extends "base.html" %}

{% block title %}Overview - Unify{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='styles/overview.css') }}">
{% endblock %}

{% block content %}
<div class="overview-container">
    <div class="page-header">
        <h1>Welcome back, {{ user.name }}!</h1>
        <p class="subtitle">Here's your academic overview for today</p>
    </div>

    <!-- Dashboard Widgets - Statistics Cards -->
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-icon" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                <i class="fas fa-book-open"></i>
            </div>
            <div class="stat-content">
                <h3>{{ stats.total_courses }}</h3>
                <p>Active Courses</p>
                <span class="stat-change positive">+2 this semester</span>
            </div>
        </div>

        <div class="stat-card">
            <div class="stat-icon" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                <i class="fas fa-tasks"></i>
            </div>
            <div class="stat-content">
                <h3>{{ stats.active_tasks }}</h3>
                <p>Active Tasks</p>
                <span class="stat-change">3 due today</span>
            </div>
        </div>

        <div class="stat-card">
            <div class="stat-icon" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                <i class="fas fa-calendar-check"></i>
            </div>
            <div class="stat-content">
                <h3>{{ stats.upcoming_events }}</h3>
                <p>Upcoming Events</p>
                <span class="stat-change">2 this week</span>
            </div>
        </div>

        <div class="stat-card">
            <div class="stat-icon" style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);">
                <i class="fas fa-check-circle"></i>
            </div>
            <div class="stat-content">
                <h3>{{ stats.completed_assignments }}</h3>
                <p>Completed Assignments</p>
                <span class="stat-change positive">+5 this month</span>
            </div>
        </div>
    </div>

    <!-- Main Content Grid -->
    <div class="content-grid">
        <!-- Today's Schedule -->
        <div class="card schedule-card">
            <div class="card-header">
                <h2><i class="fas fa-calendar-day"></i> Today's Schedule</h2>
                <span class="date-badge">Today</span>
            </div>
            <div class="card-body">
                {% if today_schedule %}
                <div class="schedule-list">
                    {% for item in today_schedule %}
                    <div class="schedule-item">
                        <div class="schedule-time">
                            <span class="time">{{ item.time }}</span>
                        </div>
                        <div class="schedule-details">
                            <h4>{{ item.event }}</h4>
                            <span class="schedule-type type-lecture">Event</span>
                        </div>
                    </div>
                    {% endfor %}
                </div>
                {% else %}
                <div class="empty-state">
                    <i class="fas fa-calendar-times"></i>
                    <p>No classes scheduled for today</p>
                </div>
                {% endif %}
            </div>
        </div>

        <!-- Notifications -->
        <div class="card notifications-card">
            <div class="card-header">
                <h2><i class="fas fa-bell"></i> Notifications</h2>
                <span class="notification-badge">{{ notifications|selectattr('read', 'equalto', False)|list|length }}</span>
            </div>
            <div class="card-body">
                {% if notifications %}
                <div class="notifications-list">
                    {% for notification in notifications[:5] %}
                    <div class="notification-item {% if not notification.read %}unread{% endif %} priority-{{ notification.priority }}">
                        <div class="notification-icon">
                            {% if notification.type == 'assignment' %}
                                <i class="fas fa-file-alt"></i>
                            {% elif notification.type == 'grade' %}
                                <i class="fas fa-graduation-cap"></i>
                            {% elif notification.type == 'exam' %}
                                <i class="fas fa-clipboard-check"></i>
                            {% else %}
                                <i class="fas fa-bullhorn"></i>
                            {% endif %}
                        </div>
                        <div class="notification-content">
                            <h4>{{ notification.title }}</h4>
                            <p>{{ notification.message }}</p>
                            <span class="notification-time">{{ notification.time }}</span>
                        </div>
                        {% if not notification.read %}
                        <div class="notification-dot"></div>
                        {% endif %}
                    </div>
                    {% endfor %}
                </div>
                <a href="#" class="view-all-link">View all notifications <i class="fas fa-arrow-right"></i></a>
                {% else %}
                <div class="empty-state">
                    <i class="fas fa-bell-slash"></i>
                    <p>No new notifications</p>
                </div>
                {% endif %}
            </div>
        </div>

        <!-- Quick Actions -->
        <div class="card">
            <div class="card-header">
                <h2><i class="fas fa-bolt"></i> Quick Actions</h2>
            </div>
            <div class="card-body">
                <div class="quick-actions">
                    <a href="#" class="action-btn">
                        <i class="fas fa-plus-circle"></i>
                        <span>Add Course</span>
                    </a>
                    <a href="#" class="action-btn">
                        <i class="fas fa-calendar-plus"></i>
                        <span>New Event</span>
                    </a>
                    <a href="#" class="action-btn">
                        <i class="fas fa-sticky-note"></i>
                        <span>Create Note</span>
                    </a>
                    <a href="#" class="action-btn">
                        <i class="fas fa-robot"></i>
                        <span>AI Assistant</span>
                    </a>
                    <a href="#" class="action-btn">
                        <i class="fas fa-tasks"></i>
                        <span>New Task</span>
                    </a>
                    <a href="#" class="action-btn">
                        <i class="fas fa-book"></i>
                        <span>View Courses</span>
                    </a>
                </div>
            </div>
        </div>

        <!-- Academic Progress Widget -->
        <div class="card">
            <div class="card-header">
                <h2><i class="fas fa-chart-line"></i> Academic Progress</h2>
            </div>
            <div class="card-body">
                <div class="progress-section">
                    <div class="progress-info">
                        <div class="gpa-display">
                            <span class="gpa-value">{{ stats.gpa }}</span>
                            <span class="gpa-label">GPA</span>
                        </div>
                        <div class="credits-info">
                            <p><strong>{{ stats.credits_completed }}</strong> / {{ stats.credits_total }} Credits</p>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: {{ stats.credits_percentage }}%"></div>
                            </div>
                            <p class="progress-text">{{ stats.credits_percentage }}% Complete</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- System Information Widget -->
        <div class="card">
            <div class="card-header">
                <h2><i class="fas fa-info-circle"></i> System Information</h2>
            </div>
            <div class="card-body">
                <div class="info-list">
                    <div class="info-item">
                        <i class="fas fa-university"></i>
                        <div>
                            <strong>University</strong>
                            <p>{{ user.university }}</p>
                        </div>
                    </div>
                    <div class="info-item">
                        <i class="fas fa-user-graduate"></i>
                        <div>
                            <strong>Role</strong>
                            <p>{{ user.role | title }}</p>
                        </div>
                    </div>
                    <div class="info-item">
                        <i class="fas fa-graduation-cap"></i>
                        <div>
                            <strong>Major</strong>
                            <p>{{ user.major }}</p>
                        </div>
                    </div>
                    <div class="info-item">
                        <i class="fas fa-calendar-alt"></i>
                        <div>
                            <strong>Academic Year</strong>
                            <p>{{ user.year }}</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

